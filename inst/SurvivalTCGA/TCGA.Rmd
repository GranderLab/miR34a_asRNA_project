---
title: "miR34a asRNA role in survival with TCGA"
author: "Jason T. Serviss"
date: "13/10/2017"
output: html_document
---

```{r}
p53mut <- rjson::fromJSON(file = '~/Github/miR34a_asRNA_project/inst/SurvivalTCGA/files.2017-11-13T13_37_07.279347_p53mut.json')
barLong <- sapply(p53mut, `[[`, 1)
barShort <- gsub('nationwidechildrens\\.org_biospecimen\\.(.*)\\.xml', "\\1", barLong)


downloadTCGA <- function() {
  projects <- TCGAbiolinks:::getGDCprojects()$project_id
  tcga <- projects[grepl("TCGA", projects)]
  
  expList <- list()
  colList <- list()
  rowList <- list()
    
  for(i in 1:length(tcga)) {
    query <- TCGAbiolinks::GDCquery(
      project = tcga[i],
      data.category = "Transcriptome Profiling",
      data.type = "Gene Expression Quantification", 
      workflow.type = "HTSeq - Counts"
    )
    
    TCGAbiolinks::GDCdownload(query)
    data <- TCGAbiolinks::GDCprepare(query)
    data <- data[, !data$is_ffpe]
    
    expList[[i]] <- SummarizedExperiment::assay(data)
    colList[[i]] <- SummarizedExperiment::colData(data)
    rowList[[i]] <- SummarizedExperiment::rowData(data)
  }
  
  return(list(expList, colList, rowList))
}


```

